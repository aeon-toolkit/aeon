name: PR Opened
on:
  pull_request_target:
    types: [opened]

permissions:
  contents: read
  pull-requests: write


jobs:
  # based on the scikit-learn 1.3.1 PR labelers
  title-labeler:
    runs-on: ubuntu-22.04

    steps:
    - uses: actions/checkout@v3

    - uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: Install PyGithub
      run: pip install -Uq PyGithub

    - name: Label pull request
      run: python build_tools/pr_title_labeler.py
      env:
        CONTEXT_GITHUB: ${{ toJson(github) }}

  # based on the scikit-learn 1.3.1 PR labelers
  contents-labeler:
    runs-on: ubuntu-22.04

    steps:
      # fork by a scikit-learn developer to allow max-labels
      - uses: thomasjpfan/labeler@v2.5.1
        with:
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
          max-labels: "3"
